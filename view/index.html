<!DOCTYPE html>
<html>
  <head>
    <title>Google Assistant CMS</title>
  </head>
  <body>
    <h1 data-title>This is the title</h1>
    <p data-text>This is the text</p>
    <script async>
      const HOST = location.origin.replace(/^http/, 'ws')
      const connection = new WebSocket(HOST);
      connection.onopen = () => {
        console.log('WS Connection is open');
      }
      connection.onerror = error => {
        console.log(`WS error`, error);
      }
      connection.onmessage = e => {
        let data = JSON.parse(e.data);

        document.querySelector('[data-title]').innerHTML = data.title;
        document.querySelector('[data-text]').innerHTML = data.text;
      }
    </script>
  </body>
</html>
